---
- hosts: set_up
  become: yes

  pre_tasks:
    - name: Update Repo's
      apt:
        update_cache: yes 
        upgrade: full
        autoremove: yes 
        autoclean: yes 
      changed_when: no
      register: update_result

    - name: Stop playbook if 'Update Repo's' task failed
      meta: end_play
      when: update_result.failed | bool
      failed_when: false

  roles:
    - start
