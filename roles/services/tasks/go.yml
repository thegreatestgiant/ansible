- name: Download Go
  get_url:
    url: "https://go.dev/dl/go{{ go.version }}.linux-{{ lookup('pipe', 'dpkg --print-architecture') }}.tar.gz"
    dest: /tmp/go.tar
    checksum: "{{ go.checksum.1 if go.checksum.1 == download_result.checksum.sha256 else go.checksum.2 }}"

- name: Extract Go
  unarchive:
    src: /tmp/go.tar
    dest: /usr/local/
  # when: checksum_result is succeeded

- name: Add Go to PATH
  lineinfile:
    path: /etc/bash.bashrc
    line: "export PATH=$PATH:/usr/local/go/bin"
    
