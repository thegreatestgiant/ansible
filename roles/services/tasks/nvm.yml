---
- name: Install NVM
  shell: >
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash
  args:
    creates: "{{ user.home }}/.nvm/nvm.sh"

- name: Source NVM script
  shell: "source {{ user.home }}/.nvm/nvm.sh"
  args:
    executable: /bin/bash
  environment:
    NVM_DIR: "{{ user.home }}/.nvm"

- name: Install Node.js
  shell: "nvm install {{ node_version }}"
  args:
    executable: /bin/bash
  environment:
    NVM_DIR: "{{ user.home }}/.nvm"

# - name: Set default Node.js version
#   shell: "nvm alias default {{ node_version }}"
#   args:
#     executable: /bin/bash
#   environment:
#     NVM_DIR: "{{ user.home }}/.nvm"
#
