---
- name: Install NVM
  shell: >
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/master/install.sh | bash && \
    export NVM_DIR="$HOME/.nvm" && \
    [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" && \
    [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
  args:
    creates: "{{ user.home }}/.nvm/nvm.sh"

- name: Install Node.js
  shell: "nvm install 18"
  args:
    executable: /bin/bash
  environment:
    NVM_DIR: "{{ user.home }}/.nvm"

# - name: Set default Node.js version
#   shell: "nvm alias default {{ node_version }}"
#   args:
#     executable: /bin/bash
#   environment:
#     NVM_DIR: "{{ user.home }}/.nvm"
#
